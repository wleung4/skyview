{"version":3,"file":"main.js","mappings":"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","sources":["webpack://skyview/./src/scripts/airport.js","webpack://skyview/./src/scripts/flight.js","webpack://skyview/./src/scripts/map.js","webpack://skyview/./src/index.js"],"sourcesContent":["const airports = [];\nlet airportObj;\nexport const getAllAirports = async () => {\n\t// csv file row = \"country_code\",\"region_name\",\"iata\",\"icao\",\"airport\",\"latitude\",\"longitude\"\n\tconst res = await fetch('./iata-icao.csv');\n\n\tconst data = await res.text();\n\tconst rows = data.split('\\n').slice(1);\n\trows.forEach((ele) => {\n\t\tconst row = ele.split(\",\");\n\t\tconst country_code = row[0].slice(1, row[0].length - 1);\n\t\tconst region_name = row[1].slice(1, row[1].length - 1);\n\t\tconst iata = row[2].slice(1, row[2].length - 1);\n\t\tconst icao = row[3].slice(1, row[3].length - 1);\n\t\tconst airport = row[4].slice(1, row[4].length - 1);\n\t\tconst latitude = row[5].slice(1, row[5].length - 1);\n\t\tconst longitude = row[6].slice(1, row[6].length - 2);\n\t\tairports.push({\n\t\t\tairport: airport, country_code: country_code, region_name: region_name, iata: iata,\n\t\t\ticao: icao, latitude: latitude, longitude: longitude\n\t\t});\n\t})\n\t// transform array of objects into single object where keys is the airport name\n\tairportObj = airports.reduce((obj, item) => Object.assign(obj, { [item.airport]: item }, {}));\n}\n\nexport const getAirportInfo = async (airportName) => {\n\tawait getAllAirports();\n\tfor (const airport in airportObj) {\n\t\tif (airport.toLowerCase() === airportName.toLowerCase()) {\n\t\t\treturn [airport, airportObj[airport].icao, airportObj[airport].latitude, airportObj[airport].longitude];\n\t\t}\n\t}\n\treturn undefined;\n}\n\nexport const search = async (input) => {\n\tawait getAllAirports();\n\tconst results = [];\n\tconst keys = Object.keys(airportObj).slice(7);\n\tkeys.forEach(airport => {\n\t\tif (airport.toLowerCase().includes(input.toLowerCase())) {\n\t\t\tresults.push(airport);\n\t\t}\n\t})\n\tif (results.length === 0) results.push('No Results Found')\n\treturn results;\n}\n\n","let allFlights;\nlet arrivalFlights;\nlet departureFlights;\nlet aircraftFlights;\nlet flightLocations;\n\nconst url = \"https://opensky-network.org/api/flights/\";\n\n// track gives back last reported location of an airplane\nexport const getFlightLocation = async(icao24, time = 0) => {\n\ttry {\n\t\tconst res = await fetch(`https://opensky-network.org/api/tracks/all?icao24=${icao24}&time=${time}` , {headers: {\n\t\t\t'Accept': 'application/json'\n\t\t}})\n\t\tif(res.ok) {\n\t\t\tconst data = await res.json();\n\t\t\treturn data.path;\n\t\t} else {\n\t\t\tthrow new Error('response not ok');\n\t\t}\n\t} catch(error) {\n\t\tconsole.error('Error fetching data', error);\n\t}\n}\n// Get all flights between time frame < 2 hrs\nexport const getAllFlights = async (begin, end)  => {\n\t// beginning and ending in unix time, seconds since epoch\n\ttry {\n\t\tconst res = await fetch(url + `all?begin=${begin}&end=${end}`, {headers: {\n\t\t\t'Accept': 'application/json'\n\t\t}});\n\t\tif(res.ok){\n\t\t\tconst data = await res.json();\n\t\t\tallFlights = data;\n\t\t\treturn data;\n\t\t} else {\n\t\t\tthrow new Error('response not ok');\n\t\t}\n\t} catch(error) {\n\t\tconsole.error('Error fetching data', error);\n\t}\n}\n\n// Get flight information for aircraft departed and arrived within time frame < 30 days, \nexport const getAircraft = async(icao24, begin, end) => {\n\ttry {\n\t\tconst res = await fetch(url + `aircraft?icao24=${icao24}&begin=${begin}&end=${end}`, {headers: {\n\t\t\t'Accept': 'application/json',\n\t\t}});\n\t\tif(res.ok) {\n\t\t\tconst data = await res.json();\n\t\t\taircraftFlights = data;\n\t\t\treturn data;\n\t\t} else {\n\t\t\tthrow new Error('response not ok');\n\t\t}\n\t} catch(error) {\n\t\tconsole.error('Error fetching aircraft', error);\n\t}\n}\n\n// Get all airport arrivals at specific airport, time frame < 1 week, arrival data from previous day or earlier\nexport const getAirportArrivals = async (airport, begin, end) => {\n\ttry {\n\t\tconst res = await fetch(url + `arrival?airport=${airport}&begin=${begin}&end=${end}`, {headers: {\n\t\t\t'Accept': 'application/json',\n\t\t}});\n\t\tif(res.ok) {\n\t\t\tconst data = await res.json();\n\t\t\tarrivalFlights = data;\n\t\t\treturn data;\n\t\t} else {\n\t\t\tthrow new Error('response not ok');\n\t\t}\n\t} catch(error) {\n\t\tconsole.error('Error fetching arrivals', error);\n\t}\n}\n\n// Get all flight depatures at specific airport, time frame < 1 week, ALWAYS UP TO DATE\nexport const getAirportDepartures = async (airport, begin, end) => {\n\ttry {\n\t\tconst res = await fetch(url + `departure?airport=${airport}&begin=${begin}&end=${end}`, {headers: {\n\t\t\t'Accept': 'application/json',\n\t\t}});\n\t\tif(res.ok) {\n\t\t\tconst data = await res.json();\n\t\t\tdepartureFlights = data;\n\t\t\treturn data;\n\t\t} else {\n\t\t\tthrow new Error('response not ok');\n\t\t}\n\t} catch(error) {\n\t\tconsole.error('Error fetching departures', error);\n\t}\n}\n\n// convert user input time in hrs\nexport const calculateTime = (time = 0) => {\n\treturn Math.floor(new Date() / 1000) - time * 3600;\n}\n\n\n","let g;\nlet projection;\nlet airportLocation;\nexport const addMap = (location, icao) => {\n\tconst height = 600;\n\tconst width = 800;\n\n\tconst svg = d3.select('#map')\n\t\t.append('svg')\n\t\t.attr('width', width)\n\t\t.attr('height', height)\n\n\tg = svg.append('g');\n\t\n\tconst handleZoom = (e) => {\n\t\tg.attr('transform', e.transform);\n\t}\n\n\tlet zoom = d3.zoom()\n\t\t.scaleExtent([1, 80])\n\t\t.translateExtent([[0, 0], [width, height]])\n\t\t.on('zoom', handleZoom);\n\t\n\tsvg.call(zoom);\n\n\tprojection = d3.geoMercator()\n\t\t.center([location[0], location[1]])\n\t\t.translate([width / 2, height / 2])\n\t\t.scale(120);\n\n\tzoom.scaleTo(svg, 20);\n\t\n\tconst path = d3.geoPath()\n\t\t.projection(projection);\n\t\n\td3.json('https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json')\n\t\t.then(data => {\n\t\t\tconst countries = topojson.feature(data, data.objects.countries);\n\t\t\tconst coordinates = projection(location);\n\t\t\tairportLocation = coordinates;\n\t\t\tg.selectAll('path')\n\t\t\t\t.data(countries.features)\n\t\t\t\t.enter()\n\t\t\t\t.append('path')\n\t\t\t\t.attr('d', path)\n\t\t\t\n\t\t\tg.selectAll('circle')\n\t\t\t\t.data(location)\n\t\t\t\t.enter()\n\t\t\t\t.append('circle')\n\t\t\t\t.attr('cx', coordinates[0])\n\t\t\t\t.attr('cy', coordinates[1])\n\t\t\t\t.attr('r', .25)\n\t\t\t\t.style('fill', 'yellow');\n\n\t\t\tg.selectAll('text')\n\t\t\t\t.data(location)\n\t\t\t\t.enter()\n\t\t\t\t.append('text')\n\t\t\t\t.attr('x', coordinates[0] + .5)\n\t\t\t\t.attr('y', coordinates[1])\n\t\t\t\t.text(icao)\n\t\t\t\t.style('font-size', '1px')\n\t\t\t\t.style('stroke', 'blue');\n\t\t});\t\n}\n\nexport const drawPath = async(path, plane) => {\n\t// [time, latitude, longitude, baro_altitude, true_track, on_ground]\n\tconst coordinates = [];\n\tcoordinates.push(airportLocation);\n\tconst waypoints = await path;\n\twaypoints.forEach(waypoint => {\n\t\tcoordinates.push(projection([waypoint[2], waypoint[1]]));\n\t})\n\t\n\t// path using line\n\tconst lineGenerator = d3.line()\n\t\t.x(d => d[0])\n\t\t.y(d => d[1]);\n\n\tg.append('path')\n\t\t.data([coordinates])\n\t\t.attr('fill', 'none')\n\t\t.style('stroke', '#9c180c')\n\t\t.style('stroke-width', 0.1)\n\t\t.attr('d', lineGenerator)\n\t\t.attr('class', 'flight-path')\n\n\tconst lastLocation = coordinates[coordinates.length - 1];\n\tconst lastAngle = waypoints[waypoints.length - 1][4];\n\t//const landed = waypoints[waypoints.length - 1][5];\n\n\tg.append('image')\n\t\t.attr('xlink:href', './assets/plane.png') // ../../assets/plane.png\n\t\t.attr('width', 1.5)\n\t\t.attr('height', 1.5)\n\t\t.attr('x', lastLocation[0] - .75)\n\t\t.attr('y', lastLocation[1] - .75)\n\t\t.attr('transform', `rotate(${lastAngle}, ${lastLocation[0]}, ${lastLocation[1]})`)\n\t\t.attr('class', 'flight-image')\n\t\n\tg.append('text')\n\t\t.attr('x', lastLocation[0] + .75)\n\t\t.attr('y', lastLocation[1] + .75)\n\t\t.text(plane) // `${plane} landed: ${landed}`\n\t\t.style('font-size', '.75px')\n\t\t.style('stroke', 'purple')\n\t\t.attr('class', 'flight-text')\n}\n\nexport const resetPaths = () => {\n\tg.selectAll('.flight-path').remove();\n\tg.selectAll('.flight-image').remove();\n\tg.selectAll('.flight-text').remove();\n}","import { getAirportInfo, search } from './scripts/airport.js';\nimport { calculateTime, getAircraft, getAirportDepartures, getFlightLocation } from './scripts/flight.js';\nimport { addMap, drawPath, resetPaths } from './scripts/map.js';\n\nconst searchForm = document.querySelector(\".home-search\");\nconst searchValue = document.querySelector(\"#search\");\nconst searchResults = document.querySelector(\"#search-results\");\nconst flightTable = document.querySelector(\"#flight-table\");\nconst mainPage = document.querySelector(\".main-page\");\nconst background = document.querySelector(\"#background\");\nconst instructions = document.querySelector(\".instructions\");\nconst reset = document.querySelector(\".reset\");\nconst map = document.querySelector(\"#map\");\nconst resetMapPaths = document.querySelector(\".reset-paths\");\nconst flightHistory = document.querySelector(\"#flight-history\");\nconst mapTableDiv = document.querySelector(\".map-and-flight-table\");\nconst footer = document.querySelector(\".footer\");\n\nlet departures;\nlet locations;\nlet airportName;\nlet timer = null;\nlet resultClicked = false;\n\nsearchValue.addEventListener(\"keyup\", () => {\n\tclearTimeout(timer);\n\n\tif (!resultClicked) {\n\t\ttimer = setTimeout(async () => {\n\t\t\tif (searchValue.value !== \"\") {\n\t\t\t\tconst matches = await search(searchValue.value);\n\t\t\t\tinstructions.style.display = \"none\";\n\t\t\t\taddResults(matches);\n\t\t\t} else {\n\t\t\t\tsearchResults.style.display = \"none\";\n\t\t\t\tinstructions.style.display = \"block\";\n\t\t\t}\n\t\t}, 500);\n\t}\n\tresultClicked = false;\n})\n\nreset.addEventListener(\"click\", (e) => {\n\te.preventDefault();\n\tmainPage.style.display = \"none\";\n\tmap.style.display = \"none\";\n\tsearchForm.style.display = \"flex\";\n\tbackground.style.display = \"inline\";\n\tsearchValue.value = \"\";\n\tsearchResults.style.display = \"none\";\n\tinstructions.style.display = \"block\";\n\treset.style.display = \"none\";\n\tresetMapPaths.style.display = \"none\";\n\tflightHistory.style.display = \"none\";\n\td3.select(\"#map\").select(\"svg\").remove();\n\tflightTable.removeChild(flightTable.firstChild);\n\tflightHistory.removeChild(flightHistory.firstChild);\n\tmapTableDiv.style.display = \"none\";\n\tfooter.style.display = \"block\";\n})\n\nsearchForm.addEventListener(\"submit\", async (e) => {\n\te.preventDefault();\n\n\tlet value = searchValue.value;\n\t// airport ICAO\n\tif (value === \"\") value = \"N/A\";\n\tlet airportInfo = await getAirportInfo(value);\n\twhile (!airportInfo) {\n\t\tairportInfo = await getAirportInfo(value);\n\t}\n\tairportName = airportInfo[0];\n\tconst airportICAO = airportInfo[1];\n\tconst airportLatitude = airportInfo[2];\n\tconst airportLongitude = airportInfo[3];\n\tsearchForm.style.display = 'none';\n\tmainPage.style.display = \"flex\";\n\tbackground.style.display = \"none\";\n\treset.style.display = \"block\";\n\tmapTableDiv.style.display = \"flex\";\n\tmap.style.display = \"block\";\n\tfooter.style.display = \"none\";\n\n\t// 1 day = 86400, 1 hr = 3600\n\tdepartures = await getAirportDepartures(airportICAO, calculateTime(6), calculateTime());\n\n\t// callsign = Plane identifier i.e. DAL767\n\tawait addFlightTable(departures);\n\n\tawait addMap([airportLongitude, airportLatitude], airportICAO);\n});\n\nconst addFlightTable = async (info) => {\n\tlet table = document.createElement(\"table\");\n\tlet tableBody = document.createElement(\"tbody\");\n\n\t//top column name row\n\tconst colRow = document.createElement(\"tr\");\n\tcolRow.classList.add(\"header\");\n\tconst callsignCol = document.createElement(\"td\");\n\tcallsignCol.textContent = \"Flight\";\n\tconst departureTimeCol = document.createElement(\"td\");\n\tdepartureTimeCol.textContent = \"Time Departed\";\n\tconst departureAirportCol = document.createElement(\"td\");\n\tdepartureAirportCol.textContent = \"From\";\n\tconst arrivalAirportCol = document.createElement(\"td\");\n\tarrivalAirportCol.textContent = \"To\";\n\n\tcolRow.appendChild(callsignCol);\n\tcolRow.appendChild(departureTimeCol);\n\tcolRow.appendChild(departureAirportCol);\n\tcolRow.appendChild(arrivalAirportCol);\n\ttableBody.appendChild(colRow);\n\n\t// actual data\n\tfor (let i = 0; i < info.length; i++) {\n\t\tconst row = document.createElement(\"tr\");\n\n\t\tconst callsign = document.createElement(\"td\");\n\t\tcallsign.textContent = info[i].callsign;\n\t\tcallsign.classList.add(\"clickable\");\n\n\t\t// allows clickable planes => gets location info about clicked plane\n\t\tcallsign.addEventListener(\"click\", async (e) => {\n\t\t\te.stopPropagation();\n\t\t\tlocations = getFlightLocation(info[i].icao24);\n\t\t\tif (locations !== 'No data found') {\n\t\t\t\tdrawPath(locations, callsign.textContent);\n\t\t\t\tconst history = await getAircraft(info[i].icao24, calculateTime(24 * 14), calculateTime());\n\t\t\t\twhile(flightHistory.firstChild) {\n\t\t\t\t\tflightHistory.removeChild(flightHistory.firstChild);\n\t\t\t\t}\n\t\t\t\taddFlightHistory(history);\n\t\t\t\tflightHistory.style.display = \"block\";\n\t\t\t}\n\t\t})\n\n\t\tconst departureTime = document.createElement(\"td\");\n\t\tconst date = new Date(info[i].firstSeen * 1000).toString();\n\t\tdepartureTime.textContent = date;\n\n\t\tconst departureAirport = document.createElement(\"td\");\n\t\tdepartureAirport.textContent = info[i].estDepartureAirport;\n\n\t\tlet arrivalAirport = document.createElement(\"td\");\n\t\tif (info[i].estArrivalAirport === null) {\n\t\t\tarrivalAirport.textContent = \"TBD\";\n\t\t} else {\n\t\t\tarrivalAirport.textContent = info[i].estArrivalAirport;\n\t\t}\n\n\t\trow.appendChild(callsign);\n\t\trow.appendChild(departureTime);\n\t\trow.appendChild(departureAirport);\n\t\trow.appendChild(arrivalAirport);\n\n\t\ttableBody.appendChild(row);\n\t}\n\ttable.appendChild(tableBody);\n\tflightTable.appendChild(table);\n\tflightTable.classList.add(\"table-style\");\n}\n\nconst addResults = (matches) => {\n\twhile (searchResults.firstChild) {\n\t\tsearchResults.removeChild(searchResults.firstChild);\n\t}\n\tmatches.forEach(match => {\n\t\tconst result = document.createElement(\"div\");\n\t\tresult.textContent = match;\n\t\tresult.addEventListener(\"click\", (e) => {\n\t\t\te.stopPropagation();\n\t\t\tsearchValue.value = result.textContent;\n\t\t\tsearchResults.style.display = \"none\";\n\t\t\tresultClicked = true;\n\t\t\tinstructions.style.display = \"block\";\n\t\t});\n\t\tsearchResults.appendChild(result);\n\t});\n\n\tif (!resultClicked) {\n\t\tsearchResults.style.display = \"block\";\n\t}\n}\n\nresetMapPaths.addEventListener(\"click\", resetPaths);\n\nconst addFlightHistory = info => {\n\tlet historyTable = document.createElement(\"table\");\n\tlet historyTableBody = document.createElement(\"tbody\");\n\n\tconst colRow = document.createElement(\"tr\");\n\tcolRow.classList.add(\"header\");\n\tconst callsignCol = document.createElement(\"td\");\n\tcallsignCol.textContent = \"Flight\";\n\tconst departureTimeCol = document.createElement(\"td\");\n\tdepartureTimeCol.textContent = \"Time Departed\";\n\tconst arrivalTimeCol = document.createElement(\"td\");\n\tarrivalTimeCol.textContent = \"Time Arrived\";\n\tconst departureAirportCol = document.createElement(\"td\");\n\tdepartureAirportCol.textContent = \"From\";\n\tconst arrivalAirportCol = document.createElement(\"td\");\n\tarrivalAirportCol.textContent = \"To\";\n\n\tcolRow.appendChild(callsignCol);\n\tcolRow.appendChild(departureTimeCol);\n\tcolRow.appendChild(arrivalTimeCol);\n\tcolRow.appendChild(departureAirportCol);\n\tcolRow.appendChild(arrivalAirportCol);\n\thistoryTableBody.appendChild(colRow);\n\n\tfor (let i = 0; i < info.length; i++) {\n\t\tconst row = document.createElement(\"tr\");\n\n\t\tconst callsign = document.createElement(\"td\");\n\t\tcallsign.textContent = info[i].callsign;\n\n\t\tconst departureTime = document.createElement(\"td\");\n\t\tconst departureDate = new Date(info[i].firstSeen * 1000).toString();\n\t\tdepartureTime.textContent = departureDate;\n\n\t\tconst arrivalTime = document.createElement(\"td\");\n\t\tconst arrivalDate = new Date(info[i].lastSeen * 1000).toString();\n\t\tif (i === 0) {\n\t\t\tarrivalTime.textContent = \"TBD\";\n\t\t} else {\n\t\t\tarrivalTime.textContent = arrivalDate;\n\t\t}\n\n\t\tconst departureAirport = document.createElement(\"td\");\n\t\tif(info[i].estDepartureAirport === null) {\n\t\t\tdepartureAirport.textContent = \"N/A\";\n\t\t} else {\n\t\t\tdepartureAirport.textContent = info[i].estDepartureAirport;\n\t\t}\n\n\t\tlet arrivalAirport = document.createElement(\"td\");\n\t\tif (info[i].estArrivalAirport === null) {\n\t\t\tarrivalAirport.textContent = \"N/A\";\n\t\t} else {\n\t\t\tarrivalAirport.textContent = info[i].estArrivalAirport;\n\t\t}\n\n\t\trow.appendChild(callsign);\n\t\trow.appendChild(departureTime);\n\t\trow.appendChild(arrivalTime);\n\t\trow.appendChild(departureAirport);\n\t\trow.appendChild(arrivalAirport);\n\n\t\thistoryTableBody.appendChild(row);\n\t}\n\thistoryTable.appendChild(historyTableBody);\n\tflightHistory.appendChild(historyTable);\n\tflightHistory.classList.add(\"table-style\");\n}\n"],"names":["airports","airportObj","getAllAirports","async","res","fetch","text","split","slice","forEach","ele","row","country_code","length","region_name","iata","icao","airport","latitude","longitude","push","reduce","obj","item","Object","assign","getAirportInfo","toLowerCase","airportName","departureFlights","aircraftFlights","url","getFlightLocation","icao24","time","arguments","undefined","headers","ok","json","path","Error","error","console","getAircraft","begin","end","data","calculateTime","Math","floor","Date","g","projection","airportLocation","drawPath","plane","coordinates","waypoints","waypoint","lineGenerator","d3","line","x","d","y","append","attr","style","lastLocation","lastAngle","searchForm","document","querySelector","searchValue","searchResults","flightTable","mainPage","background","instructions","reset","map","resetMapPaths","flightHistory","mapTableDiv","footer","departures","locations","timer","resultClicked","addEventListener","clearTimeout","setTimeout","value","matches","results","keys","includes","input","search","display","addResults","e","preventDefault","select","remove","removeChild","firstChild","airportInfo","airportICAO","airportLatitude","airportLongitude","getAirportDepartures","addFlightTable","addMap","location","svg","zoom","scaleExtent","translateExtent","on","transform","call","geoMercator","center","translate","width","height","scale","scaleTo","geoPath","then","countries","topojson","feature","objects","selectAll","features","enter","table","createElement","tableBody","colRow","classList","add","callsignCol","textContent","departureTimeCol","departureAirportCol","arrivalAirportCol","appendChild","i","info","callsign","stopPropagation","history","addFlightHistory","departureTime","date","firstSeen","toString","departureAirport","estDepartureAirport","arrivalAirport","estArrivalAirport","match","result","resetPaths","historyTable","historyTableBody","arrivalTimeCol","departureDate","arrivalTime","arrivalDate","lastSeen"],"sourceRoot":""}